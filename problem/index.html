
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="vfleaking">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.4">
    
    
      
        <title>题目 - UOJ 文档</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bb3983ee.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../extra.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href=".." title="UOJ 文档" class="md-header__button md-logo" aria-label="UOJ 文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            UOJ 文档
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              题目
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/vfleaking/uoj/" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="UOJ 文档" class="md-nav__button md-logo" aria-label="UOJ 文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    UOJ 文档
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/vfleaking/uoj/" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        主页
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        安装
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../maintain/" class="md-nav__link">
        维护
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          题目
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        题目
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    一、选项卡：编辑
  </a>
  
    <nav class="md-nav" aria-label="一、选项卡：编辑">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    ▶ 编辑题面
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    ▶ 编辑标签
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    二、标签页：管理者
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    三、标签页：数据
  </a>
  
    <nav class="md-nav" aria-label="三、标签页：数据">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    ▶ 上传原始数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    ▶ 生成测评数据包
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    四、题目数据格式
  </a>
  
    <nav class="md-nav" aria-label="四、题目数据格式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    ▶ 传统题的数据格式
  </a>
  
    <nav class="md-nav" aria-label="▶ 传统题的数据格式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    1. 数据配置文件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-hack" class="md-nav__link">
    2. 配置 Hack 功能
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3. 辅助测评程序
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    4. 测试点分值
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    5. 目录结构
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    ▶ 提交答案题的配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    ▶ 交互题的配置
  </a>
  
    <nav class="md-nav" aria-label="▶ 交互题的配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-require" class="md-nav__link">
    1. require 文件夹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-implementer" class="md-nav__link">
    2. implementer 代码
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-token" class="md-nav__link">
    3. token 机制
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    ▶ 简单通信题的配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    ▶ 意想不到的非传统题
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    四、样题
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../contest/" class="md-nav__link">
        比赛
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../dev/" class="md-nav__link">
        开发
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        关于
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    一、选项卡：编辑
  </a>
  
    <nav class="md-nav" aria-label="一、选项卡：编辑">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    ▶ 编辑题面
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    ▶ 编辑标签
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    二、标签页：管理者
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    三、标签页：数据
  </a>
  
    <nav class="md-nav" aria-label="三、标签页：数据">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    ▶ 上传原始数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    ▶ 生成测评数据包
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    四、题目数据格式
  </a>
  
    <nav class="md-nav" aria-label="四、题目数据格式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    ▶ 传统题的数据格式
  </a>
  
    <nav class="md-nav" aria-label="▶ 传统题的数据格式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    1. 数据配置文件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-hack" class="md-nav__link">
    2. 配置 Hack 功能
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3. 辅助测评程序
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    4. 测试点分值
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    5. 目录结构
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    ▶ 提交答案题的配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    ▶ 交互题的配置
  </a>
  
    <nav class="md-nav" aria-label="▶ 交互题的配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-require" class="md-nav__link">
    1. require 文件夹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-implementer" class="md-nav__link">
    2. implementer 代码
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-token" class="md-nav__link">
    3. token 机制
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    ▶ 简单通信题的配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    ▶ 意想不到的非传统题
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    四、样题
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/vfleaking/uoj/edit/master/docs/problem.md" title="编辑此页" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<h1 id="_1">题目</h1>
<p>只有超级管理员有新建题目的权限。如果你是超级管理员，你可以点击题库页面右下方的 “新建题目” 按钮来新建一个题目。然后，你就可以在题目后台对题目进行管理。后台分为三个选项卡：</p>
<ol>
<li><strong>编辑：</strong>题面编辑页面</li>
<li><strong>管理者：</strong>题目管理员列表管理页面</li>
<li><strong>数据：</strong>题目数据管理页面</li>
</ol>
<p>如果你不是超级管理员，请联系超级管理员帮忙添加题目，然后帮你加上管理该题目的权限。</p>
<p>下面我们将逐一介绍这三个选项卡（当然还有最后个 “返回” 选项卡退出后台，就不介绍了），然后我们将详细介绍题目数据需要满足的格式要求。</p>
<h2 id="_2">一、选项卡：编辑</h2>
<p>该页面可以对题面本身进行编辑，还可以管理题目的标签。</p>
<h3 id="_3">▶ 编辑题面</h3>
<p>题面用 Markdown 编写。</p>
<p>理论上题面是可以自由编写的，但还是有一些推荐的格式。可参照 UOJ 上对应类型的题面（传统题、交互题、提交答案题等）</p>
<p>一些推荐的规则：</p>
<ol>
<li>中文与英文、数字之间加一个空格隔开。</li>
<li>输入输出样例用 <code>&lt;pre&gt;</code> 标签包围，并且以一个空行结尾。（方便大家复制样例到终端后不用再打回车）</li>
<li>题面中最高级标题为三级标题。这是因为题目名称是二级标题。</li>
<li>名称超过一个字符的数学符号要用 mathrm。例如 <code>\mathrm{sgn}</code>， <code>\mathrm{lca}</code>。</li>
<li>注意 <code>\max</code>, <code>\min</code>, <code>\gcd</code> 都是有现成的。</li>
<li>注意 xor 这种名称超过一个字符的二元运算符请用 <code>\mathbin{\mathrm{xor}}</code>。</li>
<li>一行内的计算机输入输出和常量字符串表达式请用 <code>&lt;samp&gt;</code> 标签，例如 <code>请输出 “&lt;samp&gt;NO SOLUTION&lt;/samp&gt;”</code>， <code>&lt;samp&gt;aaa&lt;/samp&gt; 中有三个 &lt;samp&gt;a&lt;/samp&gt;</code>。</li>
<li>一行内的计算机代码请用 <code>`</code> 括起来，就像上面的规则那样。</li>
</ol>
<p>可参考下面这个例子：
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="__codelineno-0-1"></a>读入一个整数 $n$，表示题目中提到的 $n$ 位大爷 AC 的总题数。 请分别输出他们 AC 的总题数。
<a id="__codelineno-0-2" name="__codelineno-0-2" href="__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="__codelineno-0-3"></a>如果你不能正确读入，那么你将获得 $0$ 分。
<a id="__codelineno-0-4" name="__codelineno-0-4" href="__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="__codelineno-0-5"></a>前 $3$ 个测试点你正确读入即可获得 $6$ 分，第 4 个测试点你正确读入只能获得 $3$ 分。
<a id="__codelineno-0-6" name="__codelineno-0-6" href="__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="__codelineno-0-7"></a>如果你不会做这道题，请直接输出 “&lt;samp&gt;WOBUHUI&lt;/samp&gt;”。
<a id="__codelineno-0-8" name="__codelineno-0-8" href="__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="__codelineno-0-9"></a>下面是一个样例：
<a id="__codelineno-0-10" name="__codelineno-0-10" href="__codelineno-0-10"></a>&lt;pre&gt;
<a id="__codelineno-0-11" name="__codelineno-0-11" href="__codelineno-0-11"></a>233
<a id="__codelineno-0-12" name="__codelineno-0-12" href="__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="__codelineno-0-13"></a>&lt;/pre&gt;
</code></pre></div></p>
<h3 id="_4">▶ 编辑标签</h3>
<p>只需要用<strong>英文逗号</strong>隔开标签填入文本框就行。</p>
<p>推荐你使用如下几条规则填写标签：</p>
<ol>
<li>标签的目的是标出题目类型，方便用户检索题目。一般来说，标签顺序基本为从小范围到大范围。</li>
<li>最前面的几个标签是这题所需要的前置技能，这里假定 “二分查找” 之类过于基础的技能选手已经掌握。</li>
<li>接下来是这道题的大方法，比如 “贪心”、“DP”、“乱搞”、“构造”、“分治”……</li>
<li>接下来，如果这道题是非传统题，用一个标签注明非传统题类型，比如 “提交答案”、“交互式”、“通讯”。</li>
<li>接下来，如果这道题是模板题，用一个标签注明 “模板题”。</li>
<li>接下来，如果这道题是不用脑子想就能做出的题，例如 NOIP 第一题难度，用一个标签注明 “水题”。</li>
<li>最后，如果这题的来源比较重要，用一个标签注明。比如 “UOJ Round”、“NOI”、“WC”。</li>
<li>前置技能中，“数学” 太过宽泛不能作为标签，但 “数论” 可以作为前置技能。</li>
<li>如果有多个解法，每个解法的前置技能和大方法都不太一样，那么尽可能都标上去。</li>
<li>“乱搞” 标签不宜滥用。</li>
</ol>
<h2 id="_5">二、标签页：管理者</h2>
<p>可以通过这个页面增加或删除题目管理员。+mike 表示把 mike 加入题目管理员列表，-mike 表示把 mike 从题目管理员列表中移除。</p>
<p>题目管理员和超级管理员都能看到题目后台，但只有题目管理员才能通过 SVN 管理题目数据。所以，必要时可以将超级管理员也添加为题目管理员。当然，除了通过 SVN 管理题目数据之外，直接通过网页浏览器管理也是可以的。</p>
<h2 id="_6">三、标签页：数据</h2>
<p>UOJ 使用 SVN 管理题目数据，SVN 仓库地址可以在本页面上找到。配置题目一般分两步，第一步是上传题目数据，第二步是让 UOJ 根据上传来的数据，生成一份供测评使用的数据包。下面我们将依次进行介绍。</p>
<h3 id="_7">▶ 上传原始数据</h3>
<p>上传数据有三种方式。第一种方法是<strong>点击 “浏览 SVN 仓库” 进行上传</strong>。点击后会进入到一个文件浏览器界面，然后再点击右上角上传，就可以把本地文件直接拖拽过来上传了。</p>
<p>第二种方法是<strong>点击 “直接上传一个压缩包” 进行上传</strong>。点击后会弹出一个对话框，然后你就可以直接上传一个包含题目数据的 zip 压缩包了。上传后你可以点击 “浏览 SVN 仓库” 检查上传内容是否正确。</p>
<p>第三种方式是<strong>通过本地 SVN 客户端上传</strong>。这个有点复杂，你需要了解一点 SVN 的基础知识。不过你如果已经学会了使用 git 的话，SVN 是不难掌握的。</p>
<p>题外话：在我们开发 UOJ 核心代码的 2014 年，SVN 和 git 似乎还难分伯仲。当时考虑到 <a href="http://codeforces.com/">Codeforces</a> 附属的造题网站 Polygon 使用的是 SVN，所以我们最后让 UOJ 使用的也是 SVN 而非大家可能更熟知的 git。</p>
<p>想要使用 SVN，你得先获取你 UOJ 用户所对应的 SVN 密码。当你点击了按钮 “我会用 SVN 客户端，请发我 SVN 账号密码” 之后，UOJ 就会把你的 SVN 账号密码发送到你的邮箱。这个 SVN 密码是不随题目变化而变化的，所以你只用获取一次，然后好好保存。</p>
<p>但是，初始时 UOJ 是没有配置过用于给大家发邮件的邮箱的。所以如果你还没有配置过，请直接在数据库的 <code>user_info</code> 表中找到 <code>svn_password</code> 一栏存储的值；如果你愿意折腾一下，可以在 <code>/var/www/uoj/app/.config.php</code> 里配置一下邮箱，详情见<a href="/install/">安装教程</a>咯～</p>
<p>下面是使用 SVN 上传的一点指南：</p>
<ol>
<li>下载 SVN，即 subversion。如果是 win 可以用 TortoiseSVN，如果是 ubuntu 可以直接 <code>apt install</code>，也可以使用 smartsvn。</li>
<li>学习怎么使用 SVN，学到大约会用 checkout、add、remove、commit 的程度就可以了。</li>
<li>在题目数据管理页面，获取 svn 密码。</li>
<li>根据“数据”标签页上的 SVN 仓库地址，checkout 这道题。</li>
<li>在你的 working copy 下，<strong>建立名为 <code>1</code> 的文件夹</strong>，然后在 1 这个文件夹下放置题目数据。这一点非常重要，如果不放在该文件夹下，UOJ 将无法识别。</li>
<li>搞完之后 commit。</li>
<li>在网页上点“与SVN仓库同步”，就可以啦！</li>
</ol>
<p>将 UOJ 设计为数据都放在文件夹 <code>1</code> 下初衷是为了方便大家存同一题目的不同版本（其中主版本叫 <code>1</code>），但这样确实给传题的管理员们造成了很多困惑。所以如果网速可观，<strong>推荐大家点击 “浏览 SVN 仓库” 上传数据</strong>，这样你就不用考虑文件夹 <code>1</code> 的问题了，直接将数据放在根目录即可。</p>
<h3 id="_8">▶ 生成测评数据包</h3>
<p>UOJ 这一部分的交互界面做得有点晦涩。。</p>
<p>上传了原始数据之后，你可以点击右侧按钮 <strong>“与svn仓库同步”</strong> 来让 UOJ 对你上传的原始数据进行格式检查，并最终生成测评时使用的数据包。一般而言，这一步骤主要完成的是如下操作：</p>
<ol>
<li>检查原始数据中的输入输出文件里的换行符。如果是 <code>\r\n</code>，会被自动替换为 <code>\n</code>。多余的行末空格也会被替换掉。</li>
<li>编译测评所需的文件，比如答案检查器（chk）、标准程序（std）、数据检验器（val）。</li>
<li>将 download 文件夹下的文件打包成压缩包，作为该题的附件供选手下载。</li>
</ol>
<p>总之，你需要在上传数据之后点击 “与svn仓库同步”，检查是否有报错。顺利生成测评数据包之后，这道题的测评功能才会正常工作。</p>
<p>另外还要注意 Hack 功能的开关。初始时，题目是允许 Hack 的。这意味着你只有在上传 std 和 val 后，“与svn仓库同步” 才会停止报错。但如果你不想写，或者暂时不打算写，你可以点击 <strong>“禁止使用 Hack”</strong> 的按钮来生成测评数据包。</p>
<h2 id="_9">四、题目数据格式</h2>
<p>下面我们先从传统题的配置讲起，然后再依次展开介绍各类非传统题的配置方式。</p>
<h3 id="_10">▶ 传统题的数据格式</h3>
<h4 id="1">1. 数据配置文件</h4>
<p>假设你要上传一道传统题，输入文件是 <code>www1.in</code>, <code>www2.in</code>, ... 这个样子，输出文件 <code>www1.out</code>, <code>www2.out</code>, ...。你想设时间限制为 1s，空间限制为 256MB，那么你需要在上传这些输入输出文件的同时，编写一个类似下面这样的数据配置文件 <code>problem.conf</code>：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="__codelineno-1-1"></a>use_builtin_judger on
<a id="__codelineno-1-2" name="__codelineno-1-2" href="__codelineno-1-2"></a>use_builtin_checker ncmp
<a id="__codelineno-1-3" name="__codelineno-1-3" href="__codelineno-1-3"></a>n_tests 10
<a id="__codelineno-1-4" name="__codelineno-1-4" href="__codelineno-1-4"></a>n_ex_tests 5
<a id="__codelineno-1-5" name="__codelineno-1-5" href="__codelineno-1-5"></a>n_sample_tests 1
<a id="__codelineno-1-6" name="__codelineno-1-6" href="__codelineno-1-6"></a>input_pre www
<a id="__codelineno-1-7" name="__codelineno-1-7" href="__codelineno-1-7"></a>input_suf in
<a id="__codelineno-1-8" name="__codelineno-1-8" href="__codelineno-1-8"></a>output_pre www
<a id="__codelineno-1-9" name="__codelineno-1-9" href="__codelineno-1-9"></a>output_suf out
<a id="__codelineno-1-10" name="__codelineno-1-10" href="__codelineno-1-10"></a>time_limit 1
<a id="__codelineno-1-11" name="__codelineno-1-11" href="__codelineno-1-11"></a>memory_limit 256
<a id="__codelineno-1-12" name="__codelineno-1-12" href="__codelineno-1-12"></a>output_limit 64
</code></pre></div>
<p>当然你也可以通过点击 “修改数据配置” 按钮，来在线修改该数据配置文件的内容。</p>
<p><strong>测评类型：</strong><code>use_builtin_judger on</code> 这一行指定了该题使用 UOJ 内置的测评器进行测评，绝大多数情况下都只需要使用内置的测评器。后面我们将介绍如何使用自定义的测评器。</p>
<p><strong>输入输出文件：</strong>UOJ 会根据 <code class="highlight"><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s%d.%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">input_pre</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">input_suf</span><span class="p">)</span><span class="w"></span></code> 这种方式来匹配第 i 个输入文件，你可以将 <code>input_pre</code> 和 <code>input_suf</code> 改成自己想要的值。输出文件同理。</p>
<p><strong>额外数据：</strong>extra test 是指额外数据，在 AC 的情况下会测额外数据，如果某个额外数据通不过会被倒扣3分。额外数据中，输入文件命名形如 <code>ex_www1.in</code>, <code>ex_www2.in</code>, ... 这个样子，一般来说就是 <code class="highlight"><span class="n">printf</span><span class="p">(</span><span class="s">&quot;ex_%s%d.%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">input_pre</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">input_suf</span><span class="p">)</span><span class="w"></span></code>，输出文件同理。</p>
<p><strong>样例数据：</strong>样例必须被设置为前若干个额外数据。所以数据配置文件里有一个 <code>n_sample_tests</code> 参数，表示的是前多少组是样例。你需要把题面中的样例和大样例统统放进额外数据里。</p>
<p><strong>答案检查器（chk）：</strong>数据配置文件中，<code>use_builtin_checker ncmp</code> 的意思是将本题的 checker 设置为 <code>ncmp</code>。checker 是指判断选手输出是否正确的答案检查器。一般来说，如果输出结果为整数序列，那么用 <code>ncmp</code> 就够了。<code>ncmp</code> 会比较标准答案的整数序列和选手输出的整数序列。如果是忽略所有空白字符，进行字符串序列的比较，可以用 <code>wcmp</code>。如果你想按行比较（不忽略行末空格，但忽略文末回车），可以使用 <code>fcmp</code>。</p>
<p>如果想使用自定义的 checker，请使用 Codeforces 的 <a href="http://codeforces.com/testlib">testlib</a> 库编写 checker，并命名为 <code>chk.cpp</code>，然后在 problem.conf 中去掉 “<code>use_builtin_checker</code>” 这一行。</p>
<p><strong>时空限制：</strong><code>time_limit</code> 控制的是一个测试点的时间限制，单位为秒。<code>memory_limit</code> 控制的是一个测试点的空间限制，单位为 MB。<code>output_limit</code> 控制的是程序的输出长度限制，单位也为 MB。注意这些限制<strong>都不能为小数</strong>。</p>
<p>在目前的 UOJ 代码架构下，想让时间限制为小数似乎不是一件难事，但一直因为各种原因拖着没写。。希望有路过的有为青年可以帮帮忙咯。</p>
<h4 id="2-hack">2. 配置 Hack 功能</h4>
<p>如果想让你的题目支持 Hack 功能，那么你还要额外上传点程序。</p>
<p><strong>数据检验器（val）</strong>：数据检验器的功能是检验你的题目的输入数据是否满足题目要求。比如你输入保证是个连通图，validator 就得检验这个图是不是连通的。但比如 “保证数据随机” “保证数据均为人手工输入” 等就无法进行检验。请使用 Codeforces 的 <a href="http://codeforces.com/testlib">testlib</a> 库编写，写好后命名为 val.cpp 即可。</p>
<p><strong>标准程序（std）</strong>：标准程序的功能是给定输入，生成标准答案。默认时空限制与选手程序相同。Hack 时，chk 将会根据 std 的输出，判断选手的输出是否正确。</p>
<h4 id="3">3. 辅助测评程序</h4>
<p>我们暂且将 chk、val、std 这种称为辅助测评程序。上面我们已经介绍了这些辅助测评程序各自的用途，下面我们介绍两个有用的配置。</p>
<p><strong>配置语言：</strong>默认情况下，类似 <code>std.cpp</code> 的文件名将会被识别为 C++ 03（即编写 UOJ 核心代码时 g++ 的默认 C++ 语言标准）。如果想使用 C++ 11、C++ 14、C++ 17、C++ 20，请将文件名改为 <code>std11.cpp</code>、<code>std14.cpp</code>、<code>std17.cpp</code>、<code>std20.cpp</code>。类似的也可以有 <code>chk14.cpp</code>、<code>val20.cpp</code>。下面是文件后缀名到语言的映射表（详见 <code>app/models/UOJLang.php</code>）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="__codelineno-2-1"></a><span class="cp">&lt;?php</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="__codelineno-2-2"></a><span class="nv">$suffix_map</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="__codelineno-2-3"></a>    <span class="s1">&#39;20.cpp&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;C++20&#39;</span><span class="p">,</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="__codelineno-2-4"></a>    <span class="s1">&#39;17.cpp&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;C++17&#39;</span><span class="p">,</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="__codelineno-2-5"></a>    <span class="s1">&#39;14.cpp&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;C++14&#39;</span><span class="p">,</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="__codelineno-2-6"></a>    <span class="s1">&#39;11.cpp&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;C++11&#39;</span><span class="p">,</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="__codelineno-2-7"></a>    <span class="s1">&#39;.cpp&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;C++&#39;</span><span class="p">,</span> <span class="c1">// C++ 03</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="__codelineno-2-8"></a>    <span class="s1">&#39;.c&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="__codelineno-2-9"></a>    <span class="s1">&#39;.pas&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;Pascal&#39;</span><span class="p">,</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="__codelineno-2-10"></a>    <span class="s1">&#39;2.7.py&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Python2.7&#39;</span><span class="p">,</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="__codelineno-2-11"></a>    <span class="s1">&#39;.py&#39;</span>    <span class="o">=&gt;</span> <span class="s1">&#39;Python3&#39;</span><span class="p">,</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="__codelineno-2-12"></a>    <span class="s1">&#39;7.java&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Java7&#39;</span><span class="p">,</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="__codelineno-2-13"></a>    <span class="s1">&#39;8.java&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Java8&#39;</span><span class="p">,</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="__codelineno-2-14"></a>    <span class="s1">&#39;11.java&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Java11&#39;</span><span class="p">,</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="__codelineno-2-15"></a>    <span class="s1">&#39;14.java&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Java14&#39;</span><span class="p">,</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="__codelineno-2-16"></a><span class="p">];</span>
</code></pre></div>
<p><strong>配置时空限制：</strong>默认情况下，chk 和 val 的时空限制为 5s + 256MB，std 的时空限制与选手程序相同。如果你想让这些辅助测评程序拥有更宽松的时空限制，你可以在 <code>problem.conf</code> 中加入
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="__codelineno-3-1"></a>&lt;name&gt;_time_limit 100
<a id="__codelineno-3-2" name="__codelineno-3-2" href="__codelineno-3-2"></a>&lt;name&gt;_memory_limit 1024
</code></pre></div>
来将其时间限制设置为 100s，空间限制设置为 1024MB。其中，chk 对应的 <code>&lt;name&gt;</code> 为 <code>checker</code>，val 对应的 <code>&lt;name&gt;</code> 为 <code>validator</code>，std 对应的 <code>&lt;name&gt;</code> 为 <code>standard</code>。</p>
<h4 id="4">4. 测试点分值</h4>
<p>默认情况下，如果测试点全部通过，那么直接给 100 分。否则，如果你有 <code>n</code> 个测试点，那么每个测试点的分值为 <code class="highlight"><span class="n">floor</span><span class="p">(</span><span class="mi">100</span><span class="o">/</span><span class="n">n</span><span class="p">)</span><span class="w"></span></code>。</p>
<p>如果你想改变其中某个测试点的分值，可以在 <code>problem.conf</code> 里加入类似 <code>point_score_5 20</code> 这样的配置（意为把第 5 个测试点的分值改为 20）。</p>
<p>UOJ 支持出题人设置测试点的分值的数值类型。共有两种：整数和实数。在整数模式中，每个测试点的总分值必须为整数，实际得分也为整数；在实数模式中，测试点的分值可以有小数，最后实际得分会用浮点数进行运算，四舍五入到小数点后若干位。默认模式为整数模式，也可手动设置：<code>score_type int</code>；实数模式设置方法形如 <code>score_type real-3</code>，意为实数模式 + 保留小数点后 3 位。可以通过改变后面的这个 “3” 来控制保留到小数点后几位（可以设为 0 到 10 之间的任意整数）。</p>
<p>有些题目（特别是提答题）会有给单个测试点打部分分的需求。此时请使用自定义答案检查器 chk，并使用 quitp 函数。在整数模式下，假设测试点满分为 <span class="arithmatex"><span class="MathJax_Preview">a</span><script type="math/tex">a</script></span>，则
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="__codelineno-4-1"></a><span class="n">quitp</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;haha&quot;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
将会给 <code class="highlight"><span class="n">floor</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="mi">100</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"></span></code> 分。即，先将 <span class="arithmatex"><span class="MathJax_Preview">x</span><script type="math/tex">x</script></span> 四舍五入到小数点后两位，得到 <span class="arithmatex"><span class="MathJax_Preview">x'</span><script type="math/tex">x'</script></span>，然后给分 <span class="arithmatex"><span class="MathJax_Preview">\lfloor a \cdot x' \rfloor</span><script type="math/tex">\lfloor a \cdot x' \rfloor</script></span>。这样设计是因为 UOJ 期望你输出的 <span class="arithmatex"><span class="MathJax_Preview">x</span><script type="math/tex">x</script></span> 是一个两位小数。当你这个测试点想给 <span class="arithmatex"><span class="MathJax_Preview">p</span><script type="math/tex">p</script></span> 分（<span class="arithmatex"><span class="MathJax_Preview">p</span><script type="math/tex">p</script></span> 为整数）的时候，你输出的两位小数 <span class="arithmatex"><span class="MathJax_Preview">x</span><script type="math/tex">x</script></span> 需要满足</p>
<div class="arithmatex">
<div class="MathJax_Preview">
    \frac{p}{a} \le x &lt; \frac{p+1}{a}
</div>
<script type="math/tex; mode=display">
    \frac{p}{a} \le x < \frac{p+1}{a}
</script>
</div>
<p>因此，最稳妥的办法是：
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="__codelineno-5-1"></a><span class="n">quitp</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="mf">100.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;haha&quot;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
虽然这个上取整有点反直觉。</p>
<p>为什么整数模式下，得分是下取整的？因为下取整才可以保证答案有误的时候得分不为满分。如果想要四舍五入，可以使用实数模式。在实数模式下，若设置的精度为 <span class="arithmatex"><span class="MathJax_Preview">d</span><script type="math/tex">d</script></span>，那么 UOJ 期望你精确地输出 <span class="arithmatex"><span class="MathJax_Preview">x</span><script type="math/tex">x</script></span>，而最后得分会是将 <span class="arithmatex"><span class="MathJax_Preview">a \cdot x</span><script type="math/tex">a \cdot x</script></span> 四舍五入到小数点后第 <span class="arithmatex"><span class="MathJax_Preview">d</span><script type="math/tex">d</script></span> 位所得到的结果。因此，当你想给 <span class="arithmatex"><span class="MathJax_Preview">p</span><script type="math/tex">p</script></span> 分（<span class="arithmatex"><span class="MathJax_Preview">p</span><script type="math/tex">p</script></span> 可以是小数），那么直接像下面这样写就好了：
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="__codelineno-6-1"></a><span class="n">quitp</span><span class="p">((</span><span class="kt">double</span><span class="p">)</span><span class="n">p</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;haha&quot;</span><span class="p">);</span><span class="w"></span>
</code></pre></div></p>
<p>如果你的题目是一道以子任务形式评分的题目，那么你可以用如下语法划分子任务和设定分值：
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="__codelineno-7-1"></a>n_subtasks 6
<a id="__codelineno-7-2" name="__codelineno-7-2" href="__codelineno-7-2"></a>subtask_end_1 5
<a id="__codelineno-7-3" name="__codelineno-7-3" href="__codelineno-7-3"></a>subtask_score_1 10
<a id="__codelineno-7-4" name="__codelineno-7-4" href="__codelineno-7-4"></a>subtask_end_2 10
<a id="__codelineno-7-5" name="__codelineno-7-5" href="__codelineno-7-5"></a>subtask_score_2 10
<a id="__codelineno-7-6" name="__codelineno-7-6" href="__codelineno-7-6"></a>subtask_end_3 15
<a id="__codelineno-7-7" name="__codelineno-7-7" href="__codelineno-7-7"></a>subtask_score_3 10
<a id="__codelineno-7-8" name="__codelineno-7-8" href="__codelineno-7-8"></a>subtask_end_4 20
<a id="__codelineno-7-9" name="__codelineno-7-9" href="__codelineno-7-9"></a>subtask_score_4 20
<a id="__codelineno-7-10" name="__codelineno-7-10" href="__codelineno-7-10"></a>subtask_end_5 25
<a id="__codelineno-7-11" name="__codelineno-7-11" href="__codelineno-7-11"></a>subtask_score_5 20
<a id="__codelineno-7-12" name="__codelineno-7-12" href="__codelineno-7-12"></a>subtask_end_6 40
<a id="__codelineno-7-13" name="__codelineno-7-13" href="__codelineno-7-13"></a>subtask_score_6 30
</code></pre></div></p>
<p>可以用 <code>subtask_type_5 &lt;type&gt;</code> 将第 5 个子任务的评分类型设置为 <code>packed</code> 或 <code>min</code>。其中 <code>packed</code> 表示错一个就零分，<code>min</code> 表示测评子任务内所有测试点并取得分的最小值。默认值为 <code>packed</code>。</p>
<p>可以用 <code>subtask_used_time_type_5 &lt;type&gt;</code> 将第 5 个子任务统计程序用时的方式设置为 <code>sum</code> 或 <code>max</code>。其中 <code>sum</code> 表示将子任务内测试点的用时加起来，<code>min</code> 表示取子任务内测试点的用时最大值。默认值为 <code>sum</code>。</p>
<p>可以用 <code>subtask_dependence_5 3</code> 来将第 3 个子任务添加为第 5 个子任务的依赖任务，相当于测评时第 5 个子任务会拥有第 3 个子任务的所有测试点。所以如果第 3 个子任务中有一个错了，并且第 5 个子任务的评分类型为 <code>packed</code>，那么第 5 个子任务也会自动零分。如果你想给一个子任务添加多个依赖任务，比如同时依赖 3 和 4，那么你可以用如下语法：
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="__codelineno-8-1"></a>subtask_dependence_5 many
<a id="__codelineno-8-2" name="__codelineno-8-2" href="__codelineno-8-2"></a>subtask_dependence_5_1 3
<a id="__codelineno-8-3" name="__codelineno-8-3" href="__codelineno-8-3"></a>subtask_dependence_5_2 4
</code></pre></div></p>
<h4 id="5">5. 目录结构</h4>
<p>下面是存储一道传统题数据的文件夹所可能具有的结构：</p>
<ul>
<li><code>www1.in</code>, <code>www2.in</code>, ... ：输入文件</li>
<li><code>www1.out</code>, <code>www2.out</code>, ... ：输出文件</li>
<li><code>ex_www1.in</code>, <code>ex_www2.in</code>, ... ：额外输入文件</li>
<li><code>ex_www1.out</code>, <code>ex_www2.out</code>, ... ：额外输出文件</li>
<li><code>problem.conf</code>：数据配置文件</li>
<li><code>chk.cpp</code>：答案检查器</li>
<li><code>val.cpp</code>：数据检验器</li>
<li><code>std.cpp</code>：标准程序</li>
<li><code>download/</code>：一个文件夹，该文件夹下的文件会被打包成压缩包，作为该题的附件供选手下载。</li>
<li><code>require/</code>：一个文件夹，该文件夹下的文件会被复制到选手程序运行时所在的工作目录。</li>
</ul>
<p>注意：如果你是手动通过 SVN 客户端操作，那么你需要把这些文件都放在名为 <code>1/</code> 的文件夹下。</p>
<h3 id="_11">▶ 提交答案题的配置</h3>
<p>范例：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="__codelineno-9-1"></a>use_builtin_judger on
<a id="__codelineno-9-2" name="__codelineno-9-2" href="__codelineno-9-2"></a>submit_answer on
<a id="__codelineno-9-3" name="__codelineno-9-3" href="__codelineno-9-3"></a>n_tests 10
<a id="__codelineno-9-4" name="__codelineno-9-4" href="__codelineno-9-4"></a>input_pre www
<a id="__codelineno-9-5" name="__codelineno-9-5" href="__codelineno-9-5"></a>input_suf in
<a id="__codelineno-9-6" name="__codelineno-9-6" href="__codelineno-9-6"></a>output_pre www
<a id="__codelineno-9-7" name="__codelineno-9-7" href="__codelineno-9-7"></a>output_suf out
</code></pre></div>
<p>So easy！</p>
<p>不过还没完，因为一般来说你还要写个 chk。当然如果你是道 <a href="http://uoj.ac/problem/85">最小割计数</a> 就不用写了，直接用 <code>use_builtin_checker ncmp</code> 就行。</p>
<p>假设你已经写好 chk 了，你会发现你还需要发给选手一个本地可以运行的版本，这怎么办呢？如果只是传参进来一个测试点编号，检查测试点是否正确，那么只要善用 registerTestlib 就行了。如果你想让 checker 与用户交互，请使用 registerInteraction。特别地，如果你想让 checker 通过终端与用户进行交互，请使用如下代码（有点丑啊）
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="__codelineno-10-1"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">targv</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="s">&quot;inf_file.out&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="s">&quot;stdout&quot;</span><span class="p">};</span><span class="w"></span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="__codelineno-10-2"></a><span class="cp">#ifdef __EMSCRIPTEN__</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="__codelineno-10-3"></a><span class="w">    </span><span class="n">setvbuf</span><span class="p">(</span><span class="n">stdin</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">_IONBF</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="__codelineno-10-4"></a><span class="cp">#endif</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="__codelineno-10-5"></a><span class="w">    </span><span class="n">registerInteraction</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">targv</span><span class="p">);</span><span class="w"></span>
</code></pre></div></p>
<p>那么怎么下发文件呢？你可以把编译好的 chk 放在文件夹 download 下，该文件夹下的所有文件都会被打包发给选手。</p>
<p><strong>交叉编译小技巧：</strong>（本段写于 2016 年）由于你的本地 checker 可能需要发布到各个平台，所以你也许需要交叉编译。交叉编译的意思是在一个平台上编译出其他平台上的可执行文件。好！下面是 Ubuntu 上交叉编译小教程时间。首先不管三七二十一装一些库：（请注意 libc 和 libc++ 可能有更新的版本）
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="__codelineno-11-1"></a>sudo apt-get install libc6-dev-i386
<a id="__codelineno-11-2" name="__codelineno-11-2" href="__codelineno-11-2"></a>sudo apt-get install lib32stdc++6 lib32stdc++-4.8-dev
<a id="__codelineno-11-3" name="__codelineno-11-3" href="__codelineno-11-3"></a>sudo apt-get install mingw32
</code></pre></div></p>
<p>然后就能编译啦：
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="__codelineno-12-1"></a>g++ localchk.cpp -o checker_linux64 -O2
<a id="__codelineno-12-2" name="__codelineno-12-2" href="__codelineno-12-2"></a>g++ localchk.cpp -m32 -o checker_linux32 -O2
<a id="__codelineno-12-3" name="__codelineno-12-3" href="__codelineno-12-3"></a>i586-mingw32msvc-g++ localchk.cpp -o checker_win32.exe -O2
</code></pre></div></p>
<p>问：那其他系统怎么办？有个叫 <a href="http://kripken.github.io/emscripten-site/docs/getting_started/downloads.html">emscripten</a> 的东西，可以把 C++ 代码编译成 javascript。请务必使用 UOJ 上的 testlib，而不是 CF 上的那个版本。由于 testlib 有些黑科技，UOJ 上的 testlib 对 emscripten 才是兼容的。编译就用
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="__codelineno-13-1"></a>em++ localchk.cpp -o checker.js -O2
</code></pre></div></p>
<h3 id="_12">▶ 交互题的配置</h3>
<p>UOJ 内部并没有显式地支持交互式，而是提供了 require、implementer 和 token 这几个东西。</p>
<h4 id="1-require">1. require 文件夹</h4>
<p>除了前文所述的 download 这个文件夹，还有一个叫 require 的神奇文件夹。在测评时，这个文件夹里的所有文件均会被移动到与选手源程序同一目录下。在这个文件夹下，你可以放置交互库，供编译时使用。</p>
<p>另外，require 文件夹的内容显然不会被下发……如果你想下发一个样例交互库，可以自己放到 download 文件夹里。</p>
<h4 id="2-implementer">2. implementer 代码</h4>
<p>再来说 implementer 的用途。如果你在 <code>problem.conf</code> 里设置 <code>with_implementer on</code> 的话，各个语言的编译命令将变为：</p>
<ul>
<li>C++: <code>g++ code implementer.cpp code.cpp -lm -O2 -DONLINE_JUDGE</code></li>
<li>C: <code>gcc code implementer.c code.c -lm -O2 -DONLINE_JUDGE</code></li>
<li>Pascal: <code>fpc implementer.pas -o code -O2</code></li>
</ul>
<p>这样，一个交互题就大致做好了。你需要写 <code>implementer.cpp</code>、<code>implementer.c</code> 和 <code>implementer.pas</code>。当然你不想支持某个语言的话，就可以不写对应的交互库。</p>
<p>如果是 C/C++，正确姿势是搞一个统一的头文件放置接口，让 implementer 和选手程序都 include 这个头文件。把主函数写在 implementer 里，连起来编译时程序就是从 implementer 开始执行的了。</p>
<p>如果是 Pascal，正确姿势是让选手写一个 pascal unit 上来，在 implementer.pas 里 uses 一下。除此之外也要搞另外一个 pascal unit，里面存交互库的各种接口，让 implementer 和选手程序都 uses 一下。</p>
<h4 id="3-token">3. token 机制</h4>
<p>下面我们来解释什么是 token。考虑一道典型的交互题，交互库跟选手函数交流得很愉快，最后给了个满分。此时交互库输出了 “<code>AC!!!</code>” 的字样，也可能输出了选手一共调用了几次接口。但是聪明的选手发现，只要自己手动输出一下 “<code>AC!!!</code>” 然后果断退出似乎就能骗过测评系统了哈哈哈。</p>
<p>这是因为选手函数和交互库已经融为一体成为了一个统一的程序，测评系统分不出谁是谁。这时候，token 就出来拯救世界了。</p>
<p>在 <code>problem.conf</code> 里配置一个奇妙的 token，比如 <code>token wahaha233</code>，然后把这个 token 写进交互库的代码里（线上交互库，不是样例交互库）。在交互库准备输出任何东西之前，先输出一下这个 token。当测评系统要给选手判分时，首先判断文件的第一行是不是 token，如果不是，直接零分。这样就避免了奇怪的选手 hack 测评系统了。这里的 token 判定是在调用 checker 之前，测评系统会把 token 去掉之后的选手输出喂给 checker。（所以一道交互题的 token 要好好保护好）</p>
<p>不过这样的防御手段并不是绝对的。理论上只要选手能编写一个能理解交互库的机器码的程序，试图自动模拟交互库行为，那是很难防住的。</p>
<p>另外，记得在 C/C++ 的交互库里给全局变量开 <code>static</code>，意为仅本文件里的代码可访问（即仅交互库可访问）。</p>
<h3 id="_13">▶ 简单通信题的配置</h3>
<p>这里我们考虑最简单的通信题。有一个交互器 interactor，选手程序的输出会变成 interactor 的输入，而 interactor 的输出会变成选手程序的输入。</p>
<p>（有时这种题目也叫交互题。。但为了不致混淆我们这里称之为通信题。）</p>
<p>如果你想配置这样的题目，只需要在 <code>problem.conf</code> 中加一行
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="__codelineno-14-1"></a>interaction_mode on
</code></pre></div>
然后编写程序 interactor.cpp，跟输入输出文件放在一起即可。interactor 也属于辅助测评程序，可以参照 “辅助测评程序” 这一小节的内容进行配置。比如，通过添加一行 <code>interactor_time_limit 2</code> 可将 interactor 的时间限制设为 2s。</p>
<p>UOJ 的交互器 interactor 与 Codeforces 的交互器有一点点不同。在 Codeforces 的测评逻辑里，交互器与选手程序交互后，会把一些信息输出到文件，然后再交由答案检查器 chk 作出最终评分。但是 UOJ 里的交互器相当于 interactor + chk，也就是说交互器需要直接给出最终评分。所以，当你在使用 <a href="http://codeforces.com/testlib">testlib</a> 库编写交互器时，需要按照编写答案检查器的方式，在 <code class="highlight"><span class="n">main</span><span class="w"></span></code> 函数里第一句写上
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="__codelineno-15-1"></a><span class="n">registerTestlibCmd</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
之后你就可以通过 <code class="highlight"><span class="n">ouf</span><span class="w"></span></code> 获取选手程序输出，通过 <code class="highlight"><span class="n">cout</span><span class="w"></span></code> 或者 <code class="highlight"><span class="n">printf</span><span class="w"></span></code> 向选手程序输出信息（不要忘了刷新缓冲区），通过 <code class="highlight"><span class="n">quitf</span><span class="w"></span></code> 或者 <code class="highlight"><span class="n">quitp</span><span class="w"></span></code> 打分。注意，<strong>不要按照 Codeforces 的习惯</strong>调用 <code>registerInteraction</code>。</p>
<p>如果你想实现更复杂一点通信，比如多个程序相互之间通信，那么你可能需要参考下一节 “意想不到的非传统题” 的内容自己编写 judger 了。</p>
<h3 id="_14">▶ 意想不到的非传统题</h3>
<p>假如你有一道题不属于上述任何一种题目类型 —— 那你就得自己写测评器了！</p>
<p>测评器（judger）的任务是：给你选手提交的文件，输出一个测评结果。</p>
<p>把 problem.conf 里的 <code>use_builtin_judger on</code> 这行去掉，放一个 judger 程序的源代码放在题目数据目录下，就好了。</p>
<p>但怎么编写 judger 呢。。。？首先你需要写个 Makefile，UOJ 会根据你的 Makefile 和 judger 源代码生成 judger。如果你要使用自定义答案检查器 chk，那么你也需要在 Makefile 里面指定 chk 的编译方式。比如下面这个例子：
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="__codelineno-16-1"></a><span class="k">export</span> <span class="nv">INCLUDE_PATH</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="__codelineno-16-2"></a><span class="nv">CXXFLAGS</span> <span class="o">=</span> -I<span class="k">$(</span>INCLUDE_PATH<span class="k">)</span> -O2
<a id="__codelineno-16-3" name="__codelineno-16-3" href="__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="__codelineno-16-4"></a><span class="nf">all</span><span class="o">:</span> <span class="n">chk</span> <span class="n">judger</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="__codelineno-16-5"></a>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="__codelineno-16-6"></a><span class="nf">% </span><span class="o">:</span> %.<span class="n">cpp</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="__codelineno-16-7"></a>    <span class="k">$(</span>CXX<span class="k">)</span> <span class="k">$(</span>CXXFLAGS<span class="k">)</span> $&lt; -o <span class="nv">$@</span>
</code></pre></div></p>
<p>什么？你问 judger 应该怎么写？</p>
<p>这部分文档我只能先【坑着】。不过这里有一点有助于你自己看懂代码的指南：</p>
<ol>
<li>你可以先从 UOJ 内置的测评器读起，在 <code>uoj_judger/builtin/judger/judger.cpp</code>；</li>
<li>你会发现它引用了头文件 <code>uoj_judger.h</code>，大概读一读；</li>
<li><code>uoj_judger.h</code> 调用了沙箱 <code>uoj_judger/run/run_program.cpp</code>，大概理解一下沙箱的参数和输入输出方式；</li>
<li><code>uoj_judger.h</code> 还会用 <code>uoj_judger/run/compile.cpp</code> 来编译程序，用 <code>uoj_judger/run/run_interaction.cpp</code> 来处理程序间的通信，大概读一读；</li>
<li>回过头来仔细理解一下 <code>uoj_judger.h</code> 的代码逻辑。</li>
</ol>
<p>不过说实话 <code>uoj_judger.h</code> 封装得并不是很好。所以有计划重写一个封装得更好的库 <code>uoj_judger_v2.h</code>，这个库拖拖拉拉写了一半，但暂且还是先放了出来，供大家参考。期待神犇来造一造轮子！</p>
<p>最后，如果要使用自定义 judger 的话，就只有超级管理员能点击 “与 SVN 仓库同步” 了。这是因为 judger 的行为几乎不受限制，只能交给值得信赖的人编写。不过无论你的 judger 如何折腾，测评也是有 10 分钟的时间限制的。</p>
<h2 id="_15">四、样题</h2>
<p>在<a href="https://github.com/vfleaking/uoj-sample-problems">这个仓库</a>里我们公开了一些来自 UOJ 官网的题目数据，供大家参考。</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="页脚">
      
        
        <a href="../maintain/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 维护" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              维护
            </div>
          </div>
        </a>
      
      
        
        <a href="../contest/" class="md-footer__link md-footer__link--next" aria-label="下一页: 比赛" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              比赛
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "search": "../assets/javascripts/workers/search.361d90f1.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.289a2a4b.min.js"></script>
      
        <script src="https://uoj.ac/js/MathJax-2.7.9/MathJax.js?config=TeX-AMS_HTML"></script>
      
    
  </body>
</html>